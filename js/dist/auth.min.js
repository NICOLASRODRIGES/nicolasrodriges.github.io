var _0x4a26=['getItem','sessionToken','href','login.html','style','display','none','trim','value','getElementById','username','password','error','block','Пожалуйста,\x20введите\x20имя\x20пользователя\x20и\x20пароль','textContent','headers','json','record','admins','setItem','adminUsername','toISOString','PUT','application/json','stringify','index.html','Неверное\x20имя\x20пользователя\x20или\x20пароль','console','Ошибка:','Произошла\x20ошибка\x20при\x20входе\x20в\x20систему','removeItem'];(function(_0x2d8f05,_0x4a26c7){var _0x5c3947=function(_0x24a86c){while(--_0x24a86c){_0x2d8f05['push'](_0x2d8f05['shift']());}};_0x5c3947(++_0x4a26c7);}(_0x4a26,0x1b7));var _0x5c39=function(_0x2d8f05,_0x4a26c7){_0x2d8f05=_0x2d8f05-0x0;var _0x5c3947=_0x4a26[_0x2d8f05];return _0x5c3947;};async function hashPassword(_0x24a86c){const _0x2d8f05=new TextEncoder();const _0x4a26c7=_0x2d8f05['encode'](_0x24a86c);const _0x5c3947=await crypto['subtle']['digest']('SHA-256',_0x4a26c7);return Array['from'](new Uint8Array(_0x5c3947))['map'](_0x24a86c=>_0x24a86c['toString'](0x10)['padStart'](0x2,'0'))['join']('');}async function generateSessionToken(){const _0x24a86c=new Uint8Array(0x20);crypto['getRandomValues'](_0x24a86c);return Array['from'](_0x24a86c,_0x2d8f05=>_0x2d8f05['toString'](0x10)['padStart'](0x2,'0'))['join']('');}async function login(){const _0x24a86c=document[_0x5c39('0xa')](_0x5c39('0xb'))[_0x5c39('0x9')][_0x5c39('0x8')]();const _0x2d8f05=document[_0x5c39('0xa')](_0x5c39('0xc'))[_0x5c39('0x9')][_0x5c39('0x8')]();const _0x4a26c7=document[_0x5c39('0xa')](_0x5c39('0xd'));_0x4a26c7[_0x5c39('0x5')][_0x5c39('0x6')]=_0x5c39('0x7');if(!_0x24a86c||!_0x2d8f05){_0x4a26c7[_0x5c39('0x10')]=_0x5c39('0xf');_0x4a26c7[_0x5c39('0x5')][_0x5c39('0x6')]=_0x5c39('0xe');return;}try{const _0x5c3947=await fetch(window['API_CONFIG']['API_URL'],{'headers':{'X-Master-Key':window['API_CONFIG']['API_KEY']}});const _0x1b7c3d=await _0x5c3947[_0x5c39('0x12')]();const _0x2d8f06=_0x1b7c3d[_0x5c39('0x13')][_0x5c39('0x14')]||{};const _0x4a26c8=await hashPassword(_0x2d8f05);if(_0x2d8f06[_0x24a86c]&&_0x2d8f06[_0x24a86c][_0x5c39('0xc')]===_0x4a26c8){const _0x5c3948=await generateSessionToken();localStorage[_0x5c39('0x15')](_0x5c39('0x2'),_0x5c3948);localStorage[_0x5c39('0x15')](_0x5c39('0x16'),_0x24a86c);_0x2d8f06[_0x24a86c]['sessionToken']=_0x5c3948;_0x2d8f06[_0x24a86c]['lastLogin']=new Date()[_0x5c39('0x17')]();await fetch(window['API_CONFIG']['API_URL'],{'method':_0x5c39('0x18'),'headers':{'Content-Type':_0x5c39('0x19'),'X-Master-Key':window['API_CONFIG']['API_KEY']},'body':JSON[_0x5c39('0x1a')]({'...':_0x1b7c3d[_0x5c39('0x13')],'admins':_0x2d8f06})});window['location'][_0x5c39('0x3')]=_0x5c39('0x1b');}else{_0x4a26c7[_0x5c39('0x10')]=_0x5c39('0x1c');_0x4a26c7[_0x5c39('0x5')][_0x5c39('0x6')]=_0x5c39('0xe');}}catch(_0x24a86d){_0x5c39('0x1d')['error'](_0x5c39('0x1e'),_0x24a86d);_0x4a26c7[_0x5c39('0x10')]=_0x5c39('0x1f');_0x4a26c7[_0x5c39('0x5')][_0x5c39('0x6')]=_0x5c39('0xe');}}async function checkAuth(){const _0x24a86c=localStorage[_0x5c39('0x1')](_0x5c39('0x2'));const _0x2d8f05=localStorage[_0x5c39('0x1')](_0x5c39('0x16'));if(_0x24a86c&&_0x2d8f05){try{const _0x4a26c7=await fetch(window['API_CONFIG']['API_URL'],{'headers':{'X-Master-Key':window['API_CONFIG']['API_KEY']}});const _0x5c3947=await _0x4a26c7[_0x5c39('0x12')]();const _0x1b7c3d=_0x5c3947[_0x5c39('0x13')][_0x5c39('0x14')]||{};if(_0x1b7c3d[_0x2d8f05]&&_0x1b7c3d[_0x2d8f05]['sessionToken']===_0x24a86c){window['location'][_0x5c39('0x3')]=_0x5c39('0x1b');}else{localStorage[_0x5c39('0x20')](_0x5c39('0x2'));localStorage[_0x5c39('0x20')](_0x5c39('0x16'));}}catch(_0x2d8f06){console['error']('Ошибка\x20проверки\x20авторизации:',_0x2d8f06);}}}function logout(){localStorage[_0x5c39('0x20')](_0x5c39('0x2'));localStorage[_0x5c39('0x20')](_0x5c39('0x16'));window['location'][_0x5c39('0x3')]=_0x5c39('0x4');}window['login']=login;window['checkAuth']=checkAuth;window['logout']=logout; 